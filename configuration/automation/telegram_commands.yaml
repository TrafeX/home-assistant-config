- alias: 'Start blink lights from Telegram'
  trigger:
    trigger: event
    event_type: telegram_callback
    event_data:
      data: '/blinklights'
  action:
    - action: telegram_bot.answer_callback_query
      data_template:
        callback_query_id: '{{ trigger.event.data.id }}'
        message: 'Blinking lights enabled'
    - action: notify.send_message
      target:
        entity_id: !secret telegram_notify_bot
      data:
        message: 'Blinking lights enabled'
        data:
          inline_keyboard:
            - 'Stop:/stop_blinklights'
    - action: script.start_blink_lights

- alias: 'Stop blink lights from Telegram'
  trigger:
    trigger: event
    event_type: telegram_callback
    event_data:
      data: '/stop_blinklights'
  action:
    - action: telegram_bot.answer_callback_query
      data_template:
        callback_query_id: '{{ trigger.event.data.id }}'
        message: 'Blinking lights disabled'
    - action: notify.send_message
      target:
        entity_id: !secret telegram_notify_bot
      data:
        message: 'Blinking lights disabled'
        data:
          inline_keyboard:
            - 'Blink lights:/blinklights'
    - action: script.stop_blink_lights

- alias: 'Disarm alarm'
  trigger:
    trigger: event
    event_type: telegram_callback
    event_data:
      data: '/disarm_alarm'
  action:
    - action: alarm_control_panel.alarm_disarm
      entity_id: alarm_control_panel.home_alarm
    - action: telegram_bot.answer_callback_query
      data_template:
        callback_query_id: '{{ trigger.event.data.id }}'
        message: 'Alarm disarmed'
    - action: notify.send_message
      target:
        entity_id: !secret telegram_notify_bot
      data:
        message: 'âœ… Alarm disarmed'
