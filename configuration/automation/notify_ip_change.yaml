- id: notify_external_ip_change
  alias: Notify when the external IP changes
  trigger:
    - trigger: state
      entity_id: sensor.external_ip
  condition:
    - condition: template
      value_template: >
        {{ trigger.from_state.state not in ['unavailable', 'unknown', 'none'] }}
  action:
    - action: telegram_bot.send_message
      data:
        message: "The external IP changed: {{ states.sensor.external_ip.state }}"
